@import "tailwindcss";

/* --- 1. 先定义 CSS 变量 --- */
@layer theme {
    :root {
        --primary: var(--color-blue-600);
        --success: var(--color-green-600);
        --warning: var(--color-orange-600);
        --danger: var(--color-red-600);

        --app-bg: #ffffff;
        --app-text-reversal: #ffffff;
        --app-text-main: var(--color-zinc-900);
        --app-text-muted: var(--color-zinc-500);
        --app-border: var(--color-zinc-500);
        --app-ring: var(--color-zinc-400);
        --container-header: var(--color-zinc-100);
    }

    [data-theme="dark"] {
        --app-text-reversal: #000;
        --app-bg: var(--color-zinc-950);
        --app-text-main: var(--color-zinc-50);
        --app-text-muted: var(--color-zinc-400);
        --app-ring: var(--color-zinc-600);
        --container-header: var(--color-zinc-900);
    }

    [data-theme="coffee"] {
        --app-bg: #2c2420;
        --app-text-main: #f3e5d8;
        --app-ring: #8b5e3c;
    }
}

/* --- 3. 注册到 Tailwind 主题系统 --- */
@theme {
    --color-primary: var(--primary);
    --color-success: var(--success);
    --color-warning: var(--warning);
    --color-danger: var(--danger);
    --color-reversal: var(--app-text-reversal);
    --color-header: var(--container-header);
    --color-app: var(--app-bg);
    --color-main: var(--app-text-main);
    --color-muted: var(--app-text-muted);
    --color-base: var(--app-border);
    --color-accent-ring: var(--app-ring);
    --radius-app: 0.75rem;

    /* 注册动画到主题 */
    --animate-accordion-down: accordion-down 0.2s ease-out;
    --animate-accordion-up: accordion-up 0.2s ease-out;
}

[data-kb-overlay] {
    animation: fade-in 0.2s;
}
[data-kb-content] {
    animation: fade-in 0.2s;
}

/* --- 2. 定义关键帧动画（在 @theme 外部）--- */
@keyframes accordion-down {
    from {
        height: 0;
    }
    to {
        height: var(--kb-accordion-content-height);
    }
}

@keyframes accordion-up {
    from {
        height: var(--kb-accordion-content-height);
    }
    to {
        height: 0;
    }
}

@keyframes fade-in {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

/* --- 5. 暗色主题变体 --- */
@custom-variant dark (&:where([data-theme="dark"], [data-theme="dark"] *));
